<RebusCell>:
    size_hint: None, None
    width: root.cell_size
    height: root.cell_size
    font_size: '24sp'
    halign: 'center'
    multiline: False
    cursor_width: 0
    background_normal: ''
    canvas.after:
        Color:
            rgba: 0, 0, 0, 1
        Line:
            rectangle: (self.x, self.y, self.width, self.height)
            width: 1

<RebusScreen>:
    game_container: game_container

    canvas.before:
        Rectangle:
            source: root.background_image
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 15

        BoxLayout:
            size_hint_y: None
            height: 110
            padding: 14
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.35
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [14]

            BoxLayout:
                orientation: 'horizontal'
                spacing: 12

                Button:
                    text: "[b]ÎNAPOI[/b]"
                    markup: True
                    size_hint_x: None
                    width: 100
                    background_normal: ''
                    background_color: 0.8, 0.2, 0.2, 1
                    font_size: '16sp'
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8]
                    on_release: root.go_back()

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 1
                    spacing: 2

                    Label:
                        text: "[b]REBUS[/b]"
                        markup: True
                        font_size: '32sp'
                        color: 1, 1, 1, 1
                        size_hint_y: None
                        height: 40

                    Label:
                        text: "[b]Dificultate:[/b] " + root.current_difficulty
                        markup: True
                        font_size: '16sp'
                        color: 1, 1, 1, 0.95
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: None
                        height: 24
                        text_size: self.size

                Button:
                    text: "[b]ÎNAINTE[/b]"
                    markup: True
                    size_hint_x: None
                    width: 140
                    background_normal: ''
                    background_color: (0.2, 0.7, 0.2, 1) if root.is_completed else (0.3, 0.3, 0.3, 1)
                    font_size: '16sp'
                    disabled: not root.is_completed
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8]
                    on_release: root.finalize_rebus()

        BoxLayout:
            padding: 14
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.35
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [14]

            ScrollView:
                do_scroll_x: False
                do_scroll_y: True

                BoxLayout:
                    id: game_container
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: 6
                    padding: 6

        BoxLayout:
            size_hint_y: None
            height: 100
            padding: 14
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.35
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [14]

            BoxLayout:
                size_hint_y: None
                height: 70
                spacing: 20
                padding: [100, 0]

                Button:
                    text: "AUTO"
                    size_hint_x: None
                    width: 80
                    background_normal: ''
                    background_color: 0.5, 0.5, 0.5, 1
                    font_size: '14sp'
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8]
                    on_release: root.auto_fill()

                Button:
                    text: "ȘTERGE"
                    size_hint_x: None
                    width: 100
                    background_normal: ''
                    background_color: 0.7, 0.3, 0.3, 1
                    font_size: '14sp'
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8]
                    on_release: root.clear_rebus()

                Button:
                    text: "RESETEAZĂ" if root.is_checked else "VERIFICĂ"
                    size_hint_x: 0.25
                    background_normal: ''
                    background_color: (0.6, 0.4, 0.2, 1) if root.is_checked else (0.2, 0.6, 0.3, 1)
                    font_size: '18sp'
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8]
                    on_release: root.toggle_check()

                Button:
                    text: "REBUS NOU"
                    size_hint_x: 0.25
                    background_normal: ''
                    background_color: 0.15, 0.45, 0.75, 1
                    font_size: '18sp'
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8]
                    on_release: root.generate_rebus()
