#:import AppColors frontend.utils.colors.AppColors

<GenericQuizScreen>:
    # --- STRATUL 1: FUNDALUL ---
    Image:
        source: root.bg_image
        fit_mode: "cover"
        size_hint: 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    # --- STRATUL 2: OVERLAY ÎNTUNECAT ---
    # Folosim un Widget gol pentru a evita eroarea de parser
    Widget:
        size_hint: 1, 1
        canvas:
            Color:
                rgba: 0, 0, 0, 0.3
            Rectangle:
                pos: self.pos
                size: self.size

    # --- STRATUL 3: INTERFAȚA ---
    FloatLayout:
        # Header
        StandardHeader:
            title: "Întrebare Fulger"
            pos_hint: {'top': 1}
            back_screen: 'region_dashboard'

        # Cardul cu Întrebarea (Cu fundal personalizat/alb)
        Label:
            text: root.question_text
            font_size: '28sp'
            bold: True
            color: AppColors.TEXT_PRIMARY

            halign: 'center'
            valign: 'middle'
            text_size: self.width - 40, self.height - 40

            size_hint: None, None
            size: 800, 250
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20,]

        # Grila de Răspunsuri
        GridLayout:
            cols: 2
            spacing: 30
            padding: 50
            size_hint: 0.9, 0.4
            pos_hint: {'center_x': 0.5, 'y': 0.05}

            AnswerButton:
                text: root.options[0] if len(root.options) > 0 else ""
                on_release: root.check_answer(self.text)

            AnswerButton:
                text: root.options[1] if len(root.options) > 1 else ""
                on_release: root.check_answer(self.text)

            AnswerButton:
                text: root.options[2] if len(root.options) > 2 else ""
                on_release: root.check_answer(self.text)

            AnswerButton:
                text: root.options[3] if len(root.options) > 3 else ""
                on_release: root.check_answer(self.text)