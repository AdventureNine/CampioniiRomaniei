#:import AppColors frontend.utils.colors.AppColors

<BingoCell>:
    size_hint: None, None
    size: "60dp", "60dp"
    font_size: '14sp'
    halign: 'center'
    valign: 'middle'
    text_size: self.size
    background_normal: ''
    # Logică culori
    color: [0, 0, 0, 1] if self.background_color == [1, 1, 1, 1] else [1, 1, 1, 1]
    disabled_color: [0, 0, 0, 1] if self.background_color == [1, 1, 1, 1] else [1, 1, 1, 1]

    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8]

<BingoScreen>:
    game_container: game_container

    # 1. Fundal
    Image:
        source: root.bg_image
        fit_mode: "cover"
        size_hint: 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    # 2. Overlay
    DarkOverlay:

    FloatLayout:
        # 3. Header
        StandardHeader:
            title: "BINGO EDUCATIV"
            header_color: root.primary_color
            pos_hint: {'top': 1}
            back_screen: 'region_dashboard'

        GameContainer:
            orientation: 'vertical'
            pos_hint: {'center_x': 0.5, 'top': 0.88}
            size_hint: 0.95, 0.68
            padding: "15dp"
            spacing: "10dp"

            canvas.after:
                Color:
                    rgba: root.primary_color
                Line:
                    rounded_rectangle: (self.x, self.y, self.width, self.height, 15)
                    width: 1.5

            Label:
                text: root.bingo_theme
                font_size: '22sp'
                bold: True
                color: 1, 1, 1, 1
                text_size: self.width, None
                halign: 'center'
                valign: 'middle'
                size_hint_y: 0.1

            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'
                size_hint_y: 0.85

                # Aici Python adaugă GridLayout-ul
                BoxLayout:
                    id: game_container
                    orientation: 'vertical'
                    size_hint: None, None
                    size: self.minimum_size

        # 5. Butoane (Footer)
        BoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            height: "100dp"
            width: self.minimum_width
            pos_hint: {'center_x': 0.5, 'y': 0.03}
            spacing: "40dp"
            padding: "10dp"

            ImageButton:
                source: image_path("buttons/btn_delete.png")
                size_hint: None, None
                size: "160dp", "100dp"
                disabled: root.is_wrong or root.is_completed
                opacity: 1 if not (root.is_wrong or root.is_completed) else 0.5
                on_release: root.clear_bingo()

            ImageButton:
                source: image_path('buttons/btn_check.png')
                size_hint: None, None
                size: "160dp", "100dp"
                disabled: root.is_wrong or root.is_completed
                opacity: 1 if not (root.is_wrong or root.is_completed) else 0.5
                on_release: root.check_solution()

            ImageButton:
                source: image_path('buttons/btn_new_game.png')
                size_hint: None, None
                size: "160dp", "100dp"
                on_release: root.generate_bingo()

            ImageButton:
                source: image_path('buttons/btn_finish.png')
                size_hint: None, None
                size: "160dp", "100dp"
                disabled: not root.is_completed
                opacity: 1 if root.is_completed else 0.5
                on_release: root.go_next()