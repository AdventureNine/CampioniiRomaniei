<RebusCell>:
    size_hint: None, None
    width: root.cell_size
    height: root.cell_size
    font_size: '24sp'
    halign: 'center'
    multiline: False
    cursor_width: 0
    background_normal: ''
    canvas.after:
        Color:
            rgba: 0, 0, 0, 1
        Line:
            rectangle: (self.x, self.y, self.width, self.height)
            width: 1

<RebusScreen>:
    game_container: game_container

    Image:
        source: root.bg_image
        fit_mode: "cover"
        size_hint: 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    Widget:
        size_hint: 1, 1
        canvas:
            Color:
                rgba: 0, 0, 0, 0.4
            Rectangle:
                pos: self.pos
                size: self.size

    FloatLayout:
        StandardHeader:
            title: "REBUS"
            header_color: root.primary_color
            pos_hint: {'top': 1}
            back_screen: 'region_dashboard'

        FloatLayout:
            pos_hint: {'x': 0, 'top': 0.89}
            size_hint: 1, None
            height: root.height - 220
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.35
                RoundedRectangle:
                    pos: self.x + 14, self.y + 5
                    size: self.width - 28, self.height - 10
                    radius: [14]

            ScrollView:
                do_scroll_x: False
                do_scroll_y: True
                size_hint: None, None
                width: root.width - 28
                height: root.height - 230
                pos_hint: {'x': 0, 'center_y': 0.5}

                FloatLayout:
                    size_hint_y: None
                    height: max(self.parent.height, game_container.height)

                    BoxLayout:
                        id: game_container
                        orientation: 'vertical'
                        size_hint: None, None
                        width: root.width - 28
                        height: self.minimum_height
                        spacing: 6
                        padding: [6, 20, 6, 20]
                        pos_hint: {'x': 0, 'center_y': 0.5}

        BoxLayout:
            size_hint: None, None
            width: root.width - 28
            height: 100
            pos_hint: {'center_x': 0.5, 'y': 0.015}
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.35
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [14]

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: 70
                spacing: 20
                padding: [100, 0]
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                ImageButton:
                    source: 'backend/domain/assets/images/buttons/btn_delete.png'
                    size_hint_x: 1
                    on_release: root.clear_rebus()

                ImageButton:
                    source: 'backend/domain/assets/images/buttons/btn_reset.png' if root.is_checked else 'backend/domain/assets/images/buttons/btn_check.png'
                    size_hint_x: 1
                    on_release: root.toggle_check()

                ImageButton:
                    source: 'backend/domain/assets/images/buttons/btn_finish.png'
                    size_hint_x: 1
                    disabled: not root.is_completed
                    opacity: 1 if root.is_completed else 0.5
                    on_release: root.finalize_rebus()