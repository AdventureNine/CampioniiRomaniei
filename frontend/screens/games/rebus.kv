#:import AppColors frontend.utils.colors.AppColors

<RebusCell>:
    font_size: '22sp'
    bold: True
    padding: [0, (self.height - self.line_height) / 2]
    background_normal: ''
    canvas.after:
        Color:
            rgba: 0, 0, 0, 1
        Line:
            rectangle: (self.x, self.y, self.width, self.height)
            width: 1.2

<RebusScreen>:
    game_container: game_container

    Image:
        source: root.bg_image
        fit_mode: "cover"
        size_hint: 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    DarkOverlay:

    FloatLayout:
        StandardHeader:
            title: "REBUS"
            header_color: root.primary_color
            pos_hint: {'top': 1}
            back_screen: 'region_dashboard'

        GameContainer:
            orientation: 'vertical'
            pos_hint: {'center_x': 0.5, 'top': 0.88}
            size_hint: 0.95, 0.65
            padding: "10dp"

            canvas.after:
                Color:
                    rgba: root.primary_color
                Line:
                    rounded_rectangle: (self.x, self.y, self.width, self.height, 15)
                    width: 1.5

            ScrollView:
                do_scroll_x: True
                do_scroll_y: True
                bar_width: "10dp"
                bar_color: root.primary_color
                effect_cls: "ScrollEffect"

                BoxLayout:
                    id: game_container
                    orientation: 'vertical'
                    size_hint: None, None
                    width: self.minimum_width
                    height: self.minimum_height
                    spacing: "5dp"
                    pos_hint: {'center_x': 0.5 if self.width < root.width else None}

        BoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            height: "110dp"
            width: self.minimum_width
            pos_hint: {'center_x': 0.5, 'y': 0.02}
            spacing: "40dp"
            padding: "15dp"

            ImageButton:
                source: image_path('buttons/btn_delete.png')
                size_hint: None, None
                size: "200dp", "120dp"
                on_release: root.clear_rebus()

            ImageButton:
                source: image_path('buttons/btn_reset.png') if root.is_checked else image_path('buttons/btn_check.png')
                size_hint: None, None
                size: "200dp", "120dp"
                on_release: root.toggle_check()

            ImageButton:
                source: image_path('buttons/btn_finish.png')
                size_hint: None, None
                size: "200dp", "120dp"
                disabled: not root.is_completed
                opacity: 1 if root.is_completed else 0.5
                on_release: root.finalize_rebus()