#:import AppColors frontend.utils.colors.AppColors

<DraggableAnswer>:
    size_hint: 1, 1
    font_size: '16sp'
    bold: True
    color: 1, 1, 1, 1
    halign: 'center'
    valign: 'middle'
    text_size: self.width, None
    background_color: 0.2, 0.6, 0.8, 1

    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10,]

    # Bordură la atingere
    canvas.after:
        Color:
            rgba: (1, 1, 0, 1) if self.state == 'down' else (0, 0, 0, 0)
        Line:
            rounded_rectangle: (self.x, self.y, self.width, self.height, 10)
            width: 2

<AnswerSlot>:
    padding: "5dp"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 0.2
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10,]
        Color:
            rgba: 1, 1, 1, 0.3
        Line:
            rounded_rectangle: (self.x, self.y, self.width, self.height, 10)
            width: 1
            dash_length: 5
            dash_offset: 5

<PairsRow>:
    size_hint_y: 1
    height: "80dp"
    spacing: "20dp"
    padding: "5dp"

    # Fundal rând
    canvas.before:
        Color:
            rgba: 1, 1, 1, 0.1
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10,]

    # Partea stângă: Întrebarea (Statică)
    Label:
        text: root.question_text
        size_hint_x: 0.5
        text_size: self.width, None
        halign: 'right'
        valign: 'middle'
        bold: True
        color: 1, 1, 1, 1
        font_size: '16sp'

    # Partea dreaptă: Slotul (Receptor)
    AnswerSlot:
        id: slot
        size_hint_x: 0.5

<PairsGameScreen>:
    # Fundal
    Image:
        source: root.bg_image
        fit_mode: "cover"
        size_hint: 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    DarkOverlay:

    FloatLayout:
        # Header standard
        StandardHeader:
            title: "POTRIVEȘTE PERECHILE"
            pos_hint: {'top': 1}
            back_screen: 'region_dashboard'
            header_color: root.header_color

        # Container principal
        GameContainer:
            orientation: 'vertical'
            size_hint: None, None
            width: "900dp"
            height: root.height * 0.82
            pos_hint: {'center_x': 0.5, 'center_y': 0.45}
            spacing: "10dp"
            padding: "20dp"

            canvas.after:
                Color:
                    rgba: root.header_color
                Line:
                    rounded_rectangle: (self.x, self.y, self.width, self.height, 15)
                    width: 1.5

            # Titlu / Instrucțiuni
            Label:
                text: "Trage elementele din dreapta peste sloturile din stânga!"
                halign: "center"
                color: 1, 1, 1, 0.9
                font_size: "18sp"
                size_hint_y: None
                height: "40dp"

            # Zona de Scroll pentru perechi
            BoxLayout:
                id: rows_container
                orientation: 'vertical'
                size_hint_y: 1
                spacing: "10dp"

            # Buton Verificare
            Widget:
                size_hint_y: None
                height: "10dp"

            ImageButton:
                source: image_path('buttons/btn_check.png')
                size_hint: None, None
                size: "200dp", "60dp"
                pos_hint: {'center_x': 0.5}
                on_release: root.check_solution()