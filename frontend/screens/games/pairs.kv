#:import AppColors frontend.utils.colors.AppColors

<DraggableAnswer>:
    size_hint: 1, 1
    font_size: '16sp'
    bold: True
    color: 1, 1, 1, 1
    halign: 'center'
    valign: 'middle'
    text_size: self.width, None
    background_color: 0.2, 0.6, 0.8, 1  # Culoare Default (Albastru)

    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10,]

    # Bordură la atingere
    canvas.after:
        Color:
            rgba: (1, 1, 0, 1) if self.state == 'down' else (0, 0, 0, 0)
        Line:
            rounded_rectangle: (self.x, self.y, self.width, self.height, 10)
            width: 2

<AnswerSlot>:
    padding: 5
    canvas.before:
        Color:
            rgba: 0, 0, 0, 0.2
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10,]
        Color:
            rgba: 1, 1, 1, 0.3
        Line:
            rounded_rectangle: (self.x, self.y, self.width, self.height, 10)
            width: 1
            dash_length: 5
            dash_offset: 5

<PairsRow>:
    size_hint_y: None
    height: "80dp"
    spacing: "20dp"
    padding: "10dp"

    # Fundal rând
    canvas.before:
        Color:
            rgba: 1, 1, 1, 0.1
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10,]

    # Partea stângă: Întrebarea (Statică)
    Label:
        text: root.question_text
        size_hint_x: 0.5
        text_size: self.width, None
        halign: 'right'
        valign: 'middle'
        bold: True
        color: 1, 1, 1, 1
        font_size: '16sp'

    # Partea dreaptă: Slotul (Receptor)
    AnswerSlot:
        id: slot
        size_hint_x: 0.5

<PairsGameScreen>:
    # Fundal
    Image:
        source: root.bg_image
        fit_mode: "cover"
        size_hint: 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    # Overlay întunecat
    MDBoxLayout:
        md_bg_color: 0, 0, 0, 0.5
        size_hint: 1, 1

    FloatLayout:
        # Header standard
        StandardHeader:
            title: "POTRIVEȘTE PERECHILE"
            pos_hint: {'top': 1}
            back_screen: 'region_dashboard'
            header_color: root.header_color

        # Container principal
        MDBoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            width: "900dp" # Lățime fixă pentru consistență
            height: "650dp"
            pos_hint: {'center_x': 0.5, 'top': 0.85}
            spacing: "10dp"
            padding: "20dp"

            # Fundal container
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.6
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20,]

            # Titlu / Instrucțiuni
            MDLabel:
                text: "Trage elementele din dreapta pentru a le potrivi cu cele din stânga!"
                halign: "center"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 0.8
                font_style: "H6"
                size_hint_y: None
                height: "40dp"

            # Zona de Scroll pentru perechi
            ScrollView:
                do_scroll_x: False
                bar_width: "10dp"

                MDBoxLayout:
                    id: rows_container
                    orientation: 'vertical'
                    size_hint_y: None
                    adaptive_height: True
                    spacing: "10dp"
                    padding: "10dp"

            # Buton Verificare
            Widget:
                size_hint_y: None
                height: "20dp"

            Button:
                text: "VERIFICĂ"
                size_hint: None, None
                size: "200dp", "50dp"
                pos_hint: {'center_x': 0.5}
                background_normal: ''
                background_color: AppColors.ACCENT
                font_size: '20sp'
                bold: True
                color: AppColors.WHITE

                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [25,]

                on_release: root.check_solution()