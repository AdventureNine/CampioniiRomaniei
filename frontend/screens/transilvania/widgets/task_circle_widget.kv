#:kivy 2.0
#:import TASK_LOCK frontend.regions.transilvania.colors.TASK_LOCK
#:import TASK_LABEL_LOCKED frontend.regions.transilvania.colors.TASK_LABEL_LOCKED

<TaskCircleWidget>:
    size_hint: None, None
    size: 170, 170

    canvas.before:
        # Shadow
        Color:
            rgba: app.get_color('TASK_CIRCLE_SHADOW')
        Ellipse:
            pos: self.x + 8, self.y + 6
            size: 164, 164

        # Main circle
        Color:
            rgba: (self.task_color[0] * 1.2, self.task_color[1] * 1.2, self.task_color[2] * 1.2, 1) if (self.is_unlocked and self.is_hovered) else (self.task_color if self.is_unlocked else app.get_color('TASK_CIRCLE_LOCKED'))
        Ellipse:
            pos: self.x + 10, self.y + 10
            size: 150, 150

        # Border
        Color:
            rgba: app.get_color('TASK_CIRCLE_LINE')
        Line:
            ellipse: (self.x + 10, self.y + 10, 150, 150)
            width: 5

    Button:
        background_color: 0, 0, 0, 0
        background_normal: ''
        size_hint: None, None
        size: 170, 170
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        disabled: not root.is_unlocked

    # Task unlocked
    Label:
        text: root.task_name if root.is_unlocked else ''
        font_size: '18sp'
        bold: True
        color: 1, 1, 1, 1
        halign: 'center'
        valign: 'middle'
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        text_size: 140, None
        opacity: 1 if root.is_unlocked else 0

    # Task locked
    Label:
        text: root.task_name if not root.is_unlocked else ''
        font_size: '16sp'
        bold: True
        color: TASK_LABEL_LOCKED
        halign: 'center'
        valign: 'middle'
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        text_size: 140, None
        opacity: 0 if root.is_unlocked else 1